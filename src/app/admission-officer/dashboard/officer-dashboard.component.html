<div class="min-h-screen bg-gray-50 p-6">
  <!-- Dashboard Header -->
  <div
    class="bg-gradient-to-r from-purple-600 to-indigo-700 rounded-2xl shadow-lg p-8 mb-8 text-white"
  >
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
      <div class="mb-6 lg:mb-0">
        <h1 class="text-4xl font-bold mb-2">
          {{ greeting }}, Admission Officer!
        </h1>
        <p class="text-purple-100 text-lg">
          {{ currentTime | date: "EEEE, MMMM d, y" }} â€¢
          {{ currentTime | date: "h:mm:ss a" }}
        </p>
        <div class="mt-3 flex items-center">
          <div class="bg-white/20 rounded-xl p-3 mr-4">
            <i class="pi pi-graduation-cap text-2xl"></i>
          </div>
          <div>
            <p class="text-sm text-purple-100">Admission Management Portal</p>
            <p class="text-lg font-semibold">Oriental College</p>
          </div>
        </div>
      </div>
      <div class="flex flex-wrap gap-3">
        <button
          (click)="navigateToReview()"
          [disabled]="loading"
          class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-lg"
        >
          <i class="pi pi-file-check"></i>
          Review Applications
        </button>
        <button
          (click)="navigateToPayments()"
          [disabled]="loading"
          class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-6 py-3 rounded-xl flex items-center gap-2 transition-all transform hover:scale-105 shadow-lg"
        >
          <i class="pi pi-credit-card"></i>
          Manage Payments
        </button>
        <button
          (click)="refreshData()"
          class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-3 rounded-xl flex items-center gap-2 transition-all transform hover:scale-105 shadow-lg"
          [class.animate-spin]="loading"
        >
          <i class="pi pi-refresh" [class.animate-spin]="loading"></i>
          Refresh
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center py-20">
    <div
      class="animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mb-4"
    ></div>
    <p class="text-gray-600 text-lg">Loading admission dashboard...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="max-w-md mx-auto">
    <div class="bg-white rounded-2xl shadow-lg p-8 text-center">
      <div
        class="bg-red-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4"
      >
        <i class="pi pi-exclamation-triangle text-red-600 text-2xl"></i>
      </div>
      <h3 class="text-xl font-semibold text-gray-800 mb-2">
        Error Loading Dashboard
      </h3>
      <p class="text-gray-600 mb-6">{{ error }}</p>
      <button
        (click)="refreshData()"
        class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl flex items-center gap-2 mx-auto transition-colors"
      >
        <i class="pi pi-refresh"></i>
        Retry
      </button>
    </div>
  </div>

  <div *ngIf="!loading && !error" class="dashboard-content">
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <p-card class="stat-card total-applications">
        <div class="stat-content">
          <div class="stat-icon">
            <i class="pi pi-file"></i>
          </div>
          <div class="stat-details">
            <h3>{{ overview?.totalApplications || 0 }}</h3>
            <p>Total Applications</p>
          </div>
        </div>
      </p-card>

      <p-card class="stat-card pending-review">
        <div class="stat-content">
          <div class="stat-icon">
            <i class="pi pi-clock"></i>
          </div>
          <div class="stat-details">
            <h3>{{ overview?.pendingReview || 0 }}</h3>
            <p>Pending Review</p>
          </div>
        </div>
      </p-card>

      <p-card class="stat-card approved">
        <div class="stat-content">
          <div class="stat-icon">
            <i class="pi pi-check-circle"></i>
          </div>
          <div class="stat-details">
            <h3>{{ overview?.approved || 0 }}</h3>
            <p>Approved</p>
          </div>
        </div>
      </p-card>

      <p-card class="stat-card rejected">
        <div class="stat-content">
          <div class="stat-icon">
            <i class="pi pi-times-circle"></i>
          </div>
          <div class="stat-details">
            <h3>{{ overview?.rejected || 0 }}</h3>
            <p>Rejected</p>
          </div>
        </div>
      </p-card>

      <p-card class="stat-card payment-pending">
        <div class="stat-content">
          <div class="stat-icon">
            <i class="pi pi-credit-card"></i>
          </div>
          <div class="stat-details">
            <h3>{{ overview?.paymentPending || 0 }}</h3>
            <p>Payment Pending</p>
          </div>
        </div>
      </p-card>

      <p-card class="stat-card enrolled">
        <div class="stat-content">
          <div class="stat-icon">
            <i class="pi pi-graduation-cap"></i>
          </div>
          <div class="stat-details">
            <h3>{{ overview?.enrolled || 0 }}</h3>
            <p>Enrolled</p>
          </div>
        </div>
      </p-card>
    </div>

    <!-- Content Grid -->
    <div class="content-grid">
      <!-- Recent Applications -->
      <div class="applications-section">
        <p-card>
          <ng-template pTemplate="header">
            <div class="card-header">
              <h3><i class="pi pi-file"></i> Recent Applications</h3>
              <p-button
                icon="pi pi-external-link"
                styleClass="p-button-text p-button-sm"
                (onClick)="navigateToReview()"
                pTooltip="View All Applications"
              >
              </p-button>
            </div>
          </ng-template>

          <div *ngIf="recentApplications.length > 0" class="applications-list">
            <div
              *ngFor="let application of recentApplications"
              class="application-item"
            >
              <div class="application-info">
                <div class="application-header">
                  <h4>Application #{{ application.id }}</h4>
                  <p-tag
                    [value]="application.status | titlecase"
                    [severity]="getStatusSeverity(application.status)"
                  >
                  </p-tag>
                </div>
                <div class="application-details">
                  <p>
                    <strong>Student ID:</strong> {{ application.studentId }}
                  </p>
                  <p>
                    <strong>Submitted:</strong>
                    {{ application.submittedDate | date: "MMM d, y" }}
                  </p>
                  <p *ngIf="application.rejectionReason">
                    <strong>Reason:</strong> {{ application.rejectionReason }}
                  </p>
                </div>
              </div>
              <div class="application-actions">
                <p-button
                  icon="pi pi-eye"
                  styleClass="p-button-text p-button-sm"
                  pTooltip="View Details"
                  (onClick)="viewApplication(application.id)"
                >
                </p-button>
                <p-button
                  *ngIf="application.status === 'submitted'"
                  icon="pi pi-check"
                  styleClass="p-button-text p-button-sm p-button-success"
                  pTooltip="Quick Approve"
                  (onClick)="quickApprove(application.id)"
                >
                </p-button>
                <p-button
                  *ngIf="application.status === 'submitted'"
                  icon="pi pi-times"
                  styleClass="p-button-text p-button-sm p-button-danger"
                  pTooltip="Quick Reject"
                  (onClick)="showRejectDialog(application.id)"
                >
                </p-button>
              </div>
            </div>
          </div>

          <div *ngIf="recentApplications.length === 0" class="empty-state">
            <i class="pi pi-file"></i>
            <p>No recent applications</p>
          </div>
        </p-card>
      </div>

      <!-- Notifications -->
      <div class="notifications-section">
        <p-card>
          <ng-template pTemplate="header">
            <div class="card-header">
              <h3><i class="pi pi-bell"></i> Recent Notifications</h3>
            </div>
          </ng-template>

          <div *ngIf="notifications.length > 0" class="notifications-list">
            <div
              *ngFor="let notification of notifications"
              class="notification-item"
              [class.unread]="!notification.isRead"
            >
              <div class="notification-icon">
                <i
                  [class]="getNotificationIcon(notification.type)"
                  [class.read-icon]="notification.isRead"
                ></i>
              </div>
              <div class="notification-content">
                <h5>{{ notification.title }}</h5>
                <p>{{ notification.message }}</p>
                <span class="notification-time">{{
                  getTimeAgo(notification.createdDate)
                }}</span>
              </div>
              <div class="notification-status">
                <p-tag
                  [value]="notification.type | titlecase"
                  [severity]="getNotificationSeverity(notification.type)"
                >
                </p-tag>
              </div>
            </div>
          </div>

          <div *ngIf="notifications.length === 0" class="empty-state">
            <i class="pi pi-bell"></i>
            <p>No recent notifications</p>
          </div>
        </p-card>
      </div>

      <!-- Quick Stats -->
      <div class="quick-stats-section">
        <p-card>
          <ng-template pTemplate="header">
            <div class="card-header">
              <h3><i class="pi pi-chart-bar"></i> Today's Summary</h3>
            </div>
          </ng-template>

          <div class="quick-stats">
            <div class="stat-item">
              <div class="stat-number">
                {{ overview?.todaySubmissions || 0 }}
              </div>
              <div class="stat-label">New Submissions</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">{{ overview?.avgReviewTime || 0 }}h</div>
              <div class="stat-label">Avg Review Time</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">{{ getPendingRate().toFixed(1) }}%</div>
              <div class="stat-label">Pending Rate</div>
            </div>
          </div>

          <p-divider></p-divider>

          <div class="progress-indicators">
            <div class="progress-item">
              <label>Review Progress</label>
              <p-progressBar
                [value]="getReviewProgress()"
                [style]="{ height: '8px' }"
                styleClass="progress-success"
              >
              </p-progressBar>
            </div>
            <div class="progress-item">
              <label>Approval Rate</label>
              <p-progressBar
                [value]="getApprovalRate()"
                [style]="{ height: '8px' }"
                styleClass="progress-info"
              >
              </p-progressBar>
            </div>
          </div>
        </p-card>
      </div>
    </div>
  </div>
</div>
