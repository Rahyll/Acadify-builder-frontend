<div class="admission-stepper">
  <p-card>
    <ng-template pTemplate="header">
      <div class="stepper-header">
        <p-steps
          [model]="steps"
          [activeIndex]="activeIndex"
          [readonly]="true"
          styleClass="custom-steps"
        ></p-steps>
      </div>
    </ng-template>

    <ng-template pTemplate="content">
      <div class="content-layout">
        <!-- Left Side: Illustration -->
        <div class="illustration-panel">
          <app-step-infographics
            [stepIndex]="activeIndex"
          ></app-step-infographics>
        </div>

        <!-- Right Side: Form Content -->
        <div class="form-panel">
          <div class="step-content">
            <h3>{{ getStepTitle() }}</h3>
            <p-divider></p-divider>

            <!-- Personal Details Step -->
            <app-personal-details
              *ngIf="activeIndex === 0"
              [formGroup]="personalDetailsForm"
            ></app-personal-details>

            <!-- Category & Eligibility Step -->
            <app-category-eligibility
              *ngIf="activeIndex === 1"
              [formGroup]="categoryEligibilityForm"
            ></app-category-eligibility>

            <!-- Academic Qualifications Step -->
            <app-academic-qualifications
              *ngIf="activeIndex === 2"
              [formGroup]="academicQualificationsForm"
            ></app-academic-qualifications>

            <!-- Parent/Guardian Details Step -->
            <app-parent-guardian
              *ngIf="activeIndex === 3"
              [formGroup]="parentGuardianForm"
            ></app-parent-guardian>

            <!-- Documents & Declaration Step -->
            <app-documents-declaration
              *ngIf="activeIndex === 4"
              [formGroup]="documentsDeclarationForm"
            ></app-documents-declaration>

            <!-- Step Navigation -->
            <div class="step-actions">
              <p-button
                label="Previous"
                icon="pi pi-angle-left"
                [disabled]="isFirstStep()"
                (onClick)="previousStep()"
                styleClass="p-button-secondary"
              ></p-button>

              <div class="next-actions">
                <p-button
                  *ngIf="!isLastStep()"
                  label="Next"
                  icon="pi pi-angle-right"
                  iconPos="right"
                  [disabled]="!canProceed()"
                  (onClick)="nextStep()"
                ></p-button>

                <p-button
                  *ngIf="isLastStep()"
                  label="Submit Application"
                  icon="pi pi-check"
                  iconPos="right"
                  [disabled]="!canProceed() || isSubmitting"
                  [loading]="isSubmitting"
                  (onClick)="submitApplication()"
                  styleClass="p-button-success"
                ></p-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </p-card>
</div>
