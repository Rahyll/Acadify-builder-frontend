<div class="login-container">
  <div class="login-wrapper">
    <!-- Background Elements -->
    <div class="background-elements">
      <div class="bg-circle circle-1"></div>
      <div class="bg-circle circle-2"></div>
      <div class="bg-circle circle-3"></div>
    </div>

    <!-- Login Card -->
    <div class="login-card">
      <!-- Header -->
      <div class="login-header">
        <div class="college-logo">
          <i class="pi pi-graduation-cap"></i>
        </div>
        <h1>Oriental College</h1>
        <h2>Employee Portal</h2>
        <p>Sign in to access your account</p>
      </div>

      <!-- Login Form -->
      <div class="login-form" *ngIf="!showForgotPassword">
        <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
          <div class="form-field">
            <label for="email">Email Address</label>
            <div class="input-wrapper">
              <i class="pi pi-envelope input-icon"></i>
              <input
                id="email"
                type="email"
                formControlName="email"
                placeholder="Enter your email address"
                [class.ng-invalid]="
                  loginForm.get('email')?.invalid &&
                  loginForm.get('email')?.touched
                "
                autocomplete="email"
              />
            </div>
            <small class="field-error" *ngIf="getFieldError('email')">
              {{ getFieldError("email") }}
            </small>
          </div>

          <div class="form-field">
            <label for="password">Password</label>
            <div class="input-wrapper">
              <i class="pi pi-lock input-icon"></i>
              <input
                id="password"
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                placeholder="Enter your password"
                [class.ng-invalid]="
                  loginForm.get('password')?.invalid &&
                  loginForm.get('password')?.touched
                "
                autocomplete="current-password"
              />
              <button
                type="button"
                class="password-toggle"
                (click)="togglePasswordVisibility()"
                tabindex="-1"
              >
                <i [class]="showPassword ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
              </button>
            </div>
            <small class="field-error" *ngIf="getFieldError('password')">
              {{ getFieldError("password") }}
            </small>
          </div>

          <div class="form-options">
            <div class="remember-me">
              <p-checkbox
                inputId="rememberMe"
                formControlName="rememberMe"
                binary="true"
              ></p-checkbox>
              <label for="rememberMe">Remember me</label>
            </div>
            <button
              type="button"
              class="forgot-password-link"
              (click)="toggleForgotPassword()"
            >
              Forgot Password?
            </button>
          </div>

          <p-button
            type="submit"
            label="Sign In"
            icon="pi pi-sign-in"
            styleClass="login-button"
            [loading]="loading"
          ></p-button>
        </form>
      </div>

      <!-- Forgot Password Form -->
      <div class="forgot-password-form" *ngIf="showForgotPassword">
        <div class="forgot-header">
          <h3>Reset Password</h3>
          <p>
            Enter your email address and we'll send you instructions to reset
            your password.
          </p>
        </div>

        <div class="form-field">
          <label for="forgotEmail">Email Address</label>
          <div class="input-wrapper">
            <i class="pi pi-envelope input-icon"></i>
            <input
              id="forgotEmail"
              type="email"
              [(ngModel)]="forgotPasswordEmail"
              placeholder="Enter your email address"
              autocomplete="email"
            />
          </div>
        </div>

        <div class="forgot-actions">
          <p-button
            label="Cancel"
            icon="pi pi-times"
            styleClass="p-button-outlined cancel-button"
            (onClick)="toggleForgotPassword()"
            [disabled]="forgotPasswordLoading"
          ></p-button>
          <p-button
            label="Send Reset Link"
            icon="pi pi-send"
            styleClass="reset-button"
            (onClick)="onForgotPassword()"
            [loading]="forgotPasswordLoading"
          ></p-button>
        </div>
      </div>

      <!-- Demo Credentials -->
      <div class="demo-section" *ngIf="!showForgotPassword">
        <div class="demo-header">
          <h4>Demo Credentials</h4>
          <p>Click on any role to auto-fill login credentials</p>
        </div>
        <div class="demo-grid">
          <button
            type="button"
            class="demo-card"
            *ngFor="let demo of getDemoCredentials()"
            (click)="fillDemoCredentials(demo.email)"
          >
            <div class="demo-role">{{ demo.role }}</div>
            <div class="demo-email">{{ demo.email }}</div>
          </button>
        </div>

        <!-- Test button -->
        <button
          type="button"
          (click)="testFunction()"
          style="
            width: 100%;
            margin-top: 10px;
            padding: 10px;
            background: red;
            color: white;
            border: none;
            border-radius: 5px;
          "
        >
          TEST CLICK (if this works, click events work)
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="login-footer">
      <p>&copy; 2024 Oriental College. All rights reserved.</p>
      <div class="footer-links">
        <a href="#" class="footer-link">Privacy Policy</a>
        <span class="separator">•</span>
        <a href="#" class="footer-link">Terms of Service</a>
        <span class="separator">•</span>
        <a href="#" class="footer-link">Support</a>
      </div>
    </div>
  </div>

  <!-- Toast Messages -->
  <p-toast
    position="top-right"
    [showTransformOptions]="'translateX(100%)'"
  ></p-toast>
</div>
