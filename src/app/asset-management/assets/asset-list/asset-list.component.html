<!-- Modern Asset List Component -->
<div class="min-h-screen bg-gray-50 p-6">
  <!-- Modern Header with Gradient -->
  <div
    class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl shadow-xl p-8 mb-8 text-white"
  >
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
      <div class="mb-6 lg:mb-0">
        <h1 class="text-4xl font-bold mb-3">Asset Management</h1>
        <p class="text-indigo-100 text-lg mb-4">
          Comprehensive asset tracking and management system
        </p>
        <div class="flex flex-wrap gap-3">
          <span
            class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20"
          >
            <i class="pi pi-box mr-2"></i>
            {{ totalAssets }} Total Assets
          </span>
          <span
            class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20"
          >
            <i class="pi pi-dollar mr-2"></i>
            {{ getTotalValue() | currency }}
          </span>
        </div>
      </div>
      <div class="flex flex-col gap-3">
        <button
          (click)="createAsset()"
          class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl flex items-center gap-2 transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1"
        >
          <i class="pi pi-plus text-lg"></i>
          Add New Asset
        </button>
        <div class="flex gap-2">
          <button
            (click)="exportAssets()"
            class="bg-white/20 hover:bg-white/30 text-white px-4 py-3 rounded-xl flex items-center gap-2 transition-all duration-300"
          >
            <i class="pi pi-upload"></i>
            Export
          </button>
          <button
            (click)="importAssets()"
            class="bg-white/20 hover:bg-white/30 text-white px-4 py-3 rounded-xl flex items-center gap-2 transition-all duration-300"
          >
            <i class="pi pi-download"></i>
            Import
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced Filters Section -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-gray-800">Search & Filter Assets</h2>
      <button
        (click)="refreshData()"
        [disabled]="loading"
        class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50"
        [class.animate-spin]="loading"
      >
        <i class="pi pi-refresh" [class.animate-spin]="loading"></i>
      </button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Search Input -->
      <div class="space-y-2">
        <label for="search" class="block text-sm font-semibold text-gray-700"
          >Search Assets</label
        >
        <div class="relative">
          <input
            pInputText
            id="search"
            [(ngModel)]="searchQuery"
            placeholder="Search by name, tag, or model..."
            class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            (input)="onSearchInput()"
          />
          <i
            class="pi pi-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"
          ></i>
        </div>
      </div>

      <!-- Category Filter -->
      <div class="space-y-2">
        <label for="category" class="block text-sm font-semibold text-gray-700"
          >Category</label
        >
        <p-dropdown
          id="category"
          [options]="categories"
          [(ngModel)]="selectedCategory"
          placeholder="All Categories"
          class="w-full"
          (onChange)="onFilterChange()"
          [showClear]="true"
          styleClass="custom-dropdown"
        ></p-dropdown>
      </div>

      <!-- Status Filter -->
      <div class="space-y-2">
        <label for="status" class="block text-sm font-semibold text-gray-700"
          >Status</label
        >
        <p-dropdown
          id="status"
          [options]="statuses"
          [(ngModel)]="selectedStatus"
          placeholder="All Statuses"
          class="w-full"
          (onChange)="onFilterChange()"
          [showClear]="true"
          styleClass="custom-dropdown"
        ></p-dropdown>
      </div>

      <!-- Condition Filter -->
      <div class="space-y-2">
        <label for="condition" class="block text-sm font-semibold text-gray-700"
          >Condition</label
        >
        <p-dropdown
          id="condition"
          [options]="conditions"
          [(ngModel)]="selectedCondition"
          placeholder="All Conditions"
          class="w-full"
          (onChange)="onFilterChange()"
          [showClear]="true"
          styleClass="custom-dropdown"
        ></p-dropdown>
      </div>
    </div>

    <!-- Filter Actions -->
    <div
      class="flex items-center justify-between mt-6 pt-6 border-t border-gray-200"
    >
      <div class="text-sm text-gray-600">
        Showing {{ filteredAssets.length }} of {{ totalAssets }} assets
      </div>
      <div class="flex gap-3">
        <button
          (click)="clearFilters()"
          class="px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium"
        >
          Clear Filters
        </button>
        <button
          (click)="saveCurrentView()"
          class="px-4 py-2 text-blue-600 bg-blue-100 rounded-lg hover:bg-blue-200 transition-colors text-sm font-medium"
        >
          Save View
        </button>
      </div>
    </div>
  </div>

  <!-- Assets Table -->
  <p-card>
    <p-table
      [value]="filteredAssets"
      [loading]="loading"
      [paginator]="true"
      [rows]="rows"
      [first]="first"
      [totalRecords]="filteredAssets.length"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} assets"
      [(selection)]="selectedAssets"
      dataKey="id"
      styleClass="p-datatable-striped"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 3rem">
            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
          </th>
          <th pSortableColumn="assetTag">
            Asset Tag <p-sortIcon field="assetTag"></p-sortIcon>
          </th>
          <th pSortableColumn="name">
            Name <p-sortIcon field="name"></p-sortIcon>
          </th>
          <th pSortableColumn="category">
            Category <p-sortIcon field="category"></p-sortIcon>
          </th>
          <th pSortableColumn="status">
            Status <p-sortIcon field="status"></p-sortIcon>
          </th>
          <th pSortableColumn="condition">
            Condition <p-sortIcon field="condition"></p-sortIcon>
          </th>
          <th pSortableColumn="currentValue">
            Value <p-sortIcon field="currentValue"></p-sortIcon>
          </th>
          <th pSortableColumn="assignedTo">
            Assigned To <p-sortIcon field="assignedTo"></p-sortIcon>
          </th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-asset>
        <tr>
          <td>
            <p-tableCheckbox [value]="asset"></p-tableCheckbox>
          </td>
          <td>
            <span class="font-medium">{{ asset.assetTag }}</span>
          </td>
          <td>
            <div>
              <div class="font-medium">{{ asset.name }}</div>
              <div class="text-sm text-gray-500">
                {{ asset.brand }} {{ asset.model }}
              </div>
            </div>
          </td>
          <td>
            <p-tag [value]="asset.category" severity="info"></p-tag>
          </td>
          <td>
            <p-tag
              [value]="asset.status"
              [severity]="getStatusSeverity(asset.status)"
            ></p-tag>
          </td>
          <td>
            <p-tag
              [value]="asset.condition"
              [severity]="getConditionSeverity(asset.condition)"
            ></p-tag>
          </td>
          <td>
            {{ formatCurrency(asset.currentValue) }}
          </td>
          <td>
            {{ asset.assignedTo || "Unassigned" }}
          </td>
          <td>
            <div class="flex gap-2">
              <button
                pButton
                type="button"
                icon="pi pi-eye"
                size="small"
                severity="secondary"
                (click)="viewAsset(asset)"
                pTooltip="View Details"
              ></button>
              <button
                pButton
                type="button"
                icon="pi pi-pencil"
                size="small"
                (click)="editAsset(asset)"
                pTooltip="Edit Asset"
              ></button>
              <button
                pButton
                type="button"
                icon="pi pi-wrench"
                size="small"
                severity="warning"
                (click)="createMaintenanceRequest(asset)"
                pTooltip="Create Maintenance Request"
              ></button>
              <button
                pButton
                type="button"
                icon="pi pi-trash"
                size="small"
                severity="danger"
                (click)="deleteAsset(asset)"
                pTooltip="Delete Asset"
              ></button>
            </div>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="9" class="text-center">No assets found</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>

  <!-- Bulk Actions -->
  <div *ngIf="selectedAssets.length > 0" class="mt-4">
    <p-card>
      <div class="flex align-items-center gap-3">
        <span>{{ selectedAssets.length }} asset(s) selected</span>
        <button
          pButton
          type="button"
          label="Delete Selected"
          icon="pi pi-trash"
          severity="danger"
          size="small"
          (click)="deleteSelectedAssets()"
        ></button>
      </div>
    </p-card>
  </div>
</div>

<p-confirmDialog></p-confirmDialog>
<p-toast></p-toast>
